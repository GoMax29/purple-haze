# Weather Surf App üåä‚õàÔ∏è

Web-app m√©t√©o et surf pour la Bretagne, int√©grant pr√©visions issues de 11 mod√®les m√©t√©o et traitement personnalisable via dashboard.

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![Next.js](https://img.shields.io/badge/Next.js-14.0-black.svg)
![React](https://img.shields.io/badge/React-18.0-blue.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue.svg)

## üéØ Fonctionnalit√©s

### M√©t√©o Classique

- **Pr√©vision actuelle** : Temp√©rature, humidit√©, vent, pression en temps r√©el
- **Pr√©visions horaires** : 24h de pr√©visions d√©taill√©es avec graphiques
- **Pr√©visions hebdomadaires** : 7 jours avec temp√©ratures min/max et tendances

### Mode Surf Sp√©cialis√©

- **Carte des spots** : 8 spots de surf embl√©matiques de Bretagne
- **Conditions de surf** : Hauteur de houle, vent, mar√©e, score de surf
- **Rose des vents** : Visualisation interactive des directions de vent
- **Recommandations** : Cr√©neaux optimaux par niveau de pratique

### Innovation Technologique

- **11 mod√®les m√©t√©o** : AROME, ECMWF, GFS, GraphCast, UKMO, etc.
- **Algorithmes configurables** : Moyenne, m√©diane, moyenne tronqu√©e, pond√©ration gaussienne
- **Dashboard de configuration** : Interface intuitive pour personnaliser les strat√©gies
- **Traitement intelligent** : Combinaison optimale des mod√®les selon l'√©ch√©ance

## üõ†Ô∏è Stack Technique

### Frontend

- **Next.js** : 14.0.x
- **React** : 18.0.x
- **Zustand** : 4.4.x
- **TailwindCSS** : 3.4.17
- **TypeScript** : 5.0.x
- **ESLint** : 8.57.x
- **Testing Library** : 14.3.x / Jest DOM 6.6.x
- **Chart.js** : 4.4.x
- **Recharts** : 2.8.x

### Backend

- **API** : API Routes Next.js (serverless)
- **Services** : Fetch multi-mod√®les, traitement algorithmique
- **Configuration** : Fichier JSON dynamique avec validation

### Algorithmes Partag√©s

- **M√©diane** : R√©sistant aux valeurs aberrantes
- **Moyenne tronqu√©e** : Supprime les extr√™mes (20% par d√©faut)
- **Moyenne pond√©r√©e** : Privil√©gie les mod√®les fiables
- **Gaussienne pond√©r√©e** : Poids selon distribution gaussienne

## üìÅ Architecture Projet

```
weather-surf-app/
‚îú‚îÄ‚îÄ üìÅ components/          # Composants UI r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ NowForecast.tsx     # Pr√©vision actuelle
‚îÇ   ‚îú‚îÄ‚îÄ HourlyForecast.tsx  # Pr√©visions horaires
‚îÇ   ‚îú‚îÄ‚îÄ WeeklyForecast.tsx  # Pr√©visions hebdomadaires
‚îÇ   ‚îî‚îÄ‚îÄ SurfSpotMap.tsx     # Carte des spots de surf
‚îú‚îÄ‚îÄ üìÅ pages/               # Routes Next.js
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx           # Page d'accueil
‚îÇ   ‚îî‚îÄ‚îÄ api/                # API Routes
‚îÇ       ‚îú‚îÄ‚îÄ forecast/       # Endpoints m√©t√©o
‚îÇ       ‚îî‚îÄ‚îÄ surf/           # Endpoints surf
‚îú‚îÄ‚îÄ üìÅ backend/             # Services backend
‚îÇ   ‚îú‚îÄ‚îÄ services/           # Logique m√©tier
‚îÇ   ‚îî‚îÄ‚îÄ utils/              # Utilitaires
‚îú‚îÄ‚îÄ üìÅ shared/              # Algorithmes partag√©s
‚îÇ   ‚îú‚îÄ‚îÄ median.js           # Calcul de m√©diane
‚îÇ   ‚îú‚îÄ‚îÄ mean_trimmed.js     # Moyenne tronqu√©e
‚îÇ   ‚îú‚îÄ‚îÄ weighted_average.js # Moyenne pond√©r√©e
‚îÇ   ‚îî‚îÄ‚îÄ gaussian_weighted.js# Gaussienne pond√©r√©e
‚îú‚îÄ‚îÄ üìÅ store/               # √âtat global Zustand
‚îú‚îÄ‚îÄ üìÅ config/              # Configuration JSON
‚îî‚îÄ‚îÄ üìÅ public/              # Assets statiques + Dashboard
    ‚îî‚îÄ‚îÄ dashboard-configurator/ # Dashboard autonome
```

## üöÄ Installation et Lancement

### Pr√©requis

- Node.js 18+
- npm ou yarn

### Installation

```bash
# Cloner le repository
git clone https://github.com/votre-username/weather-surf-app.git
cd weather-surf-app

# Installer les d√©pendances
npm install

# Lancer en d√©veloppement
npm run dev
```

### Variables d'environnement

Cr√©er un fichier `.env.local` :

```env
# APIs M√©t√©o (optionnel pour la demo)
METEO_FRANCE_API_KEY=your_key_here
ECMWF_API_KEY=your_key_here
DEEPMIND_API_KEY=your_key_here
DWD_API_KEY=your_key_here
UKMO_API_KEY=your_key_here
KNMI_API_KEY=your_key_here

# Base URLs
WEATHER_API_BASE_URL=https://api.weather.example.com
SURF_API_BASE_URL=https://api.surf.example.com
```

### Commandes disponibles

```bash
npm run dev      # D√©veloppement (port 3000)
npm run build    # Build production
npm run start    # Lancer en production
npm run lint     # Linter ESLint
npm test         # Tests unitaires
```

## ‚öôÔ∏è Configuration des Strat√©gies

### Dashboard Interactif

Acc√©dez au dashboard : `http://localhost:3000/dashboard`

Le dashboard permet de :

- ‚úÖ S√©lectionner les mod√®les m√©t√©o par param√®tre et √©ch√©ance
- ‚úÖ Choisir la m√©thode de traitement (moyenne, m√©diane, etc.)
- ‚úÖ Configurer les param√®tres sp√©cifiques (poids, sigma, trim%)
- ‚úÖ Pr√©visualiser la configuration JSON
- ‚úÖ Exporter le fichier de strat√©gie

### Exemple de Configuration JSON

```json
{
  "temperature": {
    "0-48h": {
      "models": ["arome", "graphcast", "icon_eu"],
      "method": "mean_trimmed",
      "trim_percent": 0.2
    },
    "48-120h": {
      "models": ["ecmwf", "ukmo", "gfs"],
      "method": "median"
    }
  },
  "precipitation": {
    "0-24h": {
      "models": ["arome_hd", "knmi", "arp"],
      "method": "weighted_average",
      "weights": {
        "arome_hd": 0.5,
        "knmi": 0.3,
        "arp": 0.2
      }
    }
  }
}
```

## üåä Spots de Surf Inclus

| Spot          | Niveau        | Types de vagues            | Particularit√©s                 |
| ------------- | ------------- | -------------------------- | ------------------------------ |
| **La Torche** | Interm√©diaire | Beach break, Gauche/Droite | Spot embl√©matique du Finist√®re |
| **La Palue**  | Avanc√©        | Beach/Reef break           | Conditions puissantes          |
| **Guidel**    | D√©butant      | Beach break                | Id√©al apprentissage            |
| **Quiberon**  | Interm√©diaire | Point break                | Vagues longues                 |
| **Penhors**   | D√©butant      | Beach break                | Prot√©g√©, familial              |
| **Crozon**    | Interm√©diaire | Beach break                | Presqu'√Æle sauvage             |
| **Lannion**   | D√©butant      | Beach break                | C√¥tes d'Armor                  |
| **Erquy**     | D√©butant      | Beach break                | C√¥te d'√âmeraude                |

## üß¨ Cycle de Configuration

```mermaid
graph TD
    A[üë§ Utilisateur] -->|Ouvre| B[üñ•Ô∏è Dashboard HTML]
    B -->|Configure| C[‚öôÔ∏è S√©lection mod√®les/m√©thodes]
    C -->|Exporte| D[üìÑ forecast_strategy.json]
    D -->|Charge| E[üîß Backend loadConfig]
    E -->|Traite| F[üìä Donn√©es agr√©g√©es]
    F -->|Affiche| G[üì± Frontend r√©actif]
    G -->|Feedback| A
```

## üîß D√©veloppement

### Ajouter un Nouvel Algorithme

1. **Cr√©er la fonction** dans `/shared/` :

```javascript
// shared/my_algorithm.js
export function myAlgorithm(values, params) {
  // Votre logique ici
  return processedValue;
}
```

2. **Importer** dans `applyStrategy.js` :

```javascript
import { myAlgorithm } from "../../shared/my_algorithm.js";
```

3. **Ajouter** au switch dans `applyProcessingMethod()` :

```javascript
case 'my_algorithm':
  return myAlgorithm(values, config.params)
```

### Ajouter un Mod√®le M√©t√©o

1. **Configurer** dans `fetchRawData.js` :

```javascript
const WEATHER_MODELS = {
  // ... mod√®les existants
  my_model: {
    endpoint: "https://api.mymodel.com",
    headers: { "API-Key": process.env.MY_MODEL_API_KEY },
    resolution: "high",
    coverage: "120h",
  },
};
```

2. **Impl√©menter** la normalisation :

```javascript
function normalizeMyModelData(data, type) {
  // Convertir au format standard
  return normalizedData;
}
```

## üìä Algorithmes D√©taill√©s

### Moyenne Tronqu√©e

- **Principe** : Supprime X% des valeurs extr√™mes
- **Usage** : √âliminer les outliers tout en gardant la robustesse
- **Param√®tres** : `trim_percent` (0.1 √† 0.4)

### Moyenne Pond√©r√©e

- **Principe** : Poids diff√©rents selon la fiabilit√© des mod√®les
- **Usage** : Privil√©gier les mod√®les performants
- **Param√®tres** : `weights` object par mod√®le

### Gaussienne Pond√©r√©e

- **Principe** : Poids selon distance √† la m√©diane (distribution normale)
- **Usage** : Donner plus d'importance aux valeurs centrales
- **Param√®tres** : `sigma` (√©cart-type, 0.5 √† 3.0)

## üìà Performances et Optimisations

### Cache et Performance

- ‚úÖ Cache de configuration (5 min)
- ‚úÖ Validation des donn√©es en amont
- ‚úÖ Appels API en parall√®le
- ‚úÖ Fallback gracieux si mod√®les indisponibles

### Monitoring

- ‚úÖ Logs d√©taill√©s des appels API
- ‚úÖ M√©triques de performance par mod√®le
- ‚úÖ Alertes en cas d'√©chec de mod√®les critiques

## üöÄ D√©ploiement

### Vercel (Recommand√©)

```bash
# Installer Vercel CLI
npm i -g vercel

# D√©ployer
vercel --prod
```

### Docker

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
```

## üß™ Tests

### Lancer les tests

```bash
# Tests unitaires
npm test

# Tests des algorithmes
npm run test:algorithms

# Tests d'int√©gration API
npm run test:api
```

### Coverage

```bash
npm run test:coverage
```

## ü§ù Contribution

1. **Fork** le repository
2. **Cr√©er** une branche feature (`git checkout -b feature/amazing-feature`)
3. **Commit** vos changements (`git commit -m 'Add amazing feature'`)
4. **Push** vers la branche (`git push origin feature/amazing-feature`)
5. **Ouvrir** une Pull Request

### Standards de Code

- ‚úÖ ESLint + Prettier configur√©s
- ‚úÖ TypeScript strict mode
- ‚úÖ Tests unitaires obligatoires pour les algorithmes
- ‚úÖ Documentation JSDoc pour les fonctions publiques

## üìö Ressources

### APIs M√©t√©o Int√©gr√©es

- [M√©t√©o France (AROME)](https://meteofrance.com/api)
- [ECMWF](https://www.ecmwf.int/en/forecasts/accessing-forecasts)
- [NOAA GFS](https://www.weather.gov/documentation/services-web-api)
- [DWD (ICON)](https://www.dwd.de/EN/ourservices/opendata/opendata.html)
- [UK Met Office](https://www.metoffice.gov.uk/services/data/datapoint)

### Documentation Technique

- [Next.js Documentation](https://nextjs.org/docs)
- [Recharts Guide](https://recharts.org/en-US/)
- [Zustand Documentation](https://docs.pmnd.rs/zustand/getting-started/introduction)
- [Tailwind CSS](https://tailwindcss.com/docs)

## üìÑ Licence

MIT License - voir le fichier [LICENSE](LICENSE) pour plus de d√©tails.

## üë• √âquipe

- **Weather Surf Team** - D√©veloppement initial
- **Contributeurs** - Voir [CONTRIBUTORS.md](CONTRIBUTORS.md)

## üÜò Support

- üìß Email : support@weather-surf-app.com
- üêõ Issues : [GitHub Issues](https://github.com/votre-username/weather-surf-app/issues)
- üí¨ Discussions : [GitHub Discussions](https://github.com/votre-username/weather-surf-app/discussions)

---

**Fait avec ‚ù§Ô∏è pour les surfeurs et passionn√©s de m√©t√©o en Bretagne** üèÑ‚Äç‚ôÇÔ∏èüåä
# purple-haze
