<!-- Module Humidit√© -->
<div class="content-module">
  <!-- En-t√™te du module -->
  <div class="module-header">
    <h2 class="module-title">
      <span>üíß</span>
      Analyse Humidit√© Relative
    </h2>
    <p class="module-description">
      Pond√©ration gaussienne adaptative (œÉ multiplier=2.0) ‚Ä¢ Sigma auto-calcul√©
    </p>
  </div>

  <!-- Statistiques rapides -->
  <div class="stats-grid" id="humidity-stats">
    <div class="stat-card loading">
      <div class="stat-value">---%</div>
      <div class="stat-label">Humidit√© moyenne</div>
    </div>
    <div class="stat-card loading">
      <div class="stat-value">---</div>
      <div class="stat-label">Points de donn√©es</div>
    </div>
    <div class="stat-card loading">
      <div class="stat-value">--</div>
      <div class="stat-label">Sigma adaptatif</div>
    </div>
    <div class="stat-card loading">
      <div class="stat-value">---%</div>
      <div class="stat-label">√âcart-type</div>
    </div>
  </div>

  <!-- Graphique principal -->
  <div class="card">
    <div class="card-header">
      <h3>üìä √âvolution de l'Humidit√© Relative (7 jours)</h3>
      <div class="card-actions">
        <span class="badge humidity-badge">0-100%</span>
      </div>
    </div>
    <div class="chart-container">
      <canvas id="humidity-chart" width="800" height="400"></canvas>
    </div>
  </div>

  <!-- Indicateur de confort -->
  <div class="card comfort-card">
    <div class="card-header">
      <h3>üå°Ô∏è Indicateur de Confort Hygrom√©trique</h3>
      <div class="card-actions">
        <span class="info-badge">Temps r√©el</span>
      </div>
    </div>
    <div class="comfort-content">
      <div class="comfort-gauge">
        <div class="gauge-container">
          <div class="gauge-track">
            <div class="gauge-fill" id="humidity-gauge"></div>
          </div>
          <div class="gauge-labels">
            <span class="gauge-label low">Sec</span>
            <span class="gauge-label optimal">Optimal</span>
            <span class="gauge-label high">Humide</span>
          </div>
        </div>
        <div class="gauge-value">
          <span class="current-humidity" id="current-humidity">--%</span>
          <span class="humidity-status" id="humidity-status"
            >Chargement...</span
          >
        </div>
      </div>

      <div class="comfort-zones">
        <div class="zone-info">
          <div class="zone-indicator dry"></div>
          <div class="zone-text">
            <strong>0-40%</strong> ‚Ä¢ Sec ‚Ä¢ Inconfort respiratoire
          </div>
        </div>
        <div class="zone-info">
          <div class="zone-indicator optimal"></div>
          <div class="zone-text">
            <strong>40-60%</strong> ‚Ä¢ Optimal ‚Ä¢ Zone de confort
          </div>
        </div>
        <div class="zone-info">
          <div class="zone-indicator humid"></div>
          <div class="zone-text">
            <strong>60-100%</strong> ‚Ä¢ Humide ‚Ä¢ Sensation de moiteur
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tableau des donn√©es -->
  <div class="card">
    <div class="card-header">
      <h3>üìã Tableau des Pr√©visions Hygrom√©triques</h3>
      <div class="card-actions">
        <span class="info-badge">Toutes les 6h</span>
      </div>
    </div>
    <div class="table-container" id="humidity-table">
      <div class="table-loading">
        <div class="spinner"></div>
        <p>Chargement du tableau...</p>
      </div>
    </div>
  </div>

  <!-- Exemple de calcul adaptatif -->
  <div class="card methodology-card adaptive">
    <div class="card-header">
      <h3>üßÆ Exemple de Calcul Gaussien Adaptatif (h+24)</h3>
      <div class="card-actions">
        <span class="method-badge adaptive">Sigma Auto</span>
      </div>
    </div>
    <div class="methodology-content">
      <div class="adaptive-explanation">
        <div class="adaptive-intro">
          <div class="adaptive-icon">üéØ</div>
          <div class="adaptive-text">
            <strong>Algorithme adaptatif</strong>
            <p>
              Le sigma varie selon la dispersion des mod√®les pour optimiser la
              pond√©ration.
            </p>
          </div>
        </div>
      </div>

      <div class="method-grid">
        <div class="method-section">
          <h4>üì• Valeurs brutes</h4>
          <div class="method-values">
            <div class="model-value">
              <span class="model-name">MF AROME FRANCE</span>
              <span class="model-val">78.2%</span>
            </div>
            <div class="model-value">
              <span class="model-name">ICON EU</span>
              <span class="model-val">75.8%</span>
            </div>
            <div class="model-value">
              <span class="model-name">KNMI HARMONIE AROME EU</span>
              <span class="model-val">82.1%</span>
            </div>
          </div>
        </div>

        <div class="method-section">
          <h4>‚öôÔ∏è Calcul adaptatif</h4>
          <div class="method-calculation">
            <div class="calc-step adaptive-step">
              <span class="calc-label">√âcart-type:</span>
              <span class="calc-value">1.6%</span>
            </div>
            <div class="calc-step adaptive-step">
              <span class="calc-label">Multiplier:</span>
              <span class="calc-value">2.0</span>
            </div>
            <div class="calc-step adaptive-step">
              <span class="calc-label">Sigma adaptatif:</span>
              <span class="calc-value">3.2</span>
            </div>
            <div class="calc-step">
              <span class="calc-label">Poids:</span>
              <span class="calc-value">[0.298, 0.402, 0.3]</span>
            </div>
            <div class="calc-result adaptive-result">
              <span class="calc-label">R√©sultat final:</span>
              <span class="calc-final">78.9%</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Informations sp√©cifiques -->
  <div class="alert alert--info">
    <div class="alert-icon">üí°</div>
    <div>
      <strong>√Ä propos de l'humidit√© relative</strong>
      <p>
        L'humidit√© relative mesure le pourcentage de vapeur d'eau dans l'air par
        rapport au maximum possible √† une temp√©rature donn√©e. L'algorithme
        gaussien adaptatif ajuste automatiquement le sigma selon la dispersion
        des mod√®les, permettant une meilleure pond√©ration en cas de forte
        divergence.
      </p>
    </div>
  </div>
</div>

<style>
  /* Styles sp√©cifiques au module humidit√© */
  .humidity-badge {
    background: #dbeafe;
    color: #1e40af;
  }

  .comfort-card {
    background: linear-gradient(135deg, #fefefe, #dbeafe);
    border: 2px solid #bfdbfe;
  }

  .comfort-content {
    padding: 1rem 0;
  }

  .comfort-gauge {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .gauge-container {
    position: relative;
    width: 300px;
  }

  .gauge-track {
    height: 20px;
    background: linear-gradient(
      to right,
      #ef4444 0%,
      #fbbf24 40%,
      #10b981 60%,
      #3b82f6 100%
    );
    border-radius: 10px;
    position: relative;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .gauge-fill {
    position: absolute;
    top: -5px;
    width: 10px;
    height: 30px;
    background: white;
    border: 3px solid #1e293b;
    border-radius: 50%;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: left 0.5s ease;
    transform: translateX(-50%);
  }

  .gauge-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
  }

  .gauge-label.low {
    color: #ef4444;
  }
  .gauge-label.optimal {
    color: #10b981;
  }
  .gauge-label.high {
    color: #3b82f6;
  }

  .gauge-value {
    text-align: center;
  }

  .current-humidity {
    font-size: 3rem;
    font-weight: 700;
    color: var(--accent-dark);
    display: block;
  }

  .humidity-status {
    font-size: 1.1rem;
    font-weight: 600;
    color: #64748b;
    margin-top: 0.5rem;
  }

  .comfort-zones {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .zone-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: white;
    border-radius: 0.75rem;
    border: 1px solid #e2e8f0;
  }

  .zone-indicator {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .zone-indicator.dry {
    background: #ef4444;
  }
  .zone-indicator.optimal {
    background: #10b981;
  }
  .zone-indicator.humid {
    background: #3b82f6;
  }

  .zone-text {
    font-size: 0.9rem;
    color: #374151;
  }

  .zone-text strong {
    color: #1e293b;
  }

  /* Styles adaptatifs sp√©cifiques */
  .methodology-card.adaptive {
    background: linear-gradient(135deg, #fefefe, #ecfdf5);
    border: 2px solid #a7f3d0;
  }

  .adaptive-explanation {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, #ecfdf5, #d1fae5);
    border-radius: 0.75rem;
    border: 1px solid #10b981;
  }

  .adaptive-intro {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .adaptive-icon {
    font-size: 2rem;
    padding: 1rem;
    background: white;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
  }

  .adaptive-text strong {
    color: #065f46;
    font-size: 1.1rem;
  }

  .adaptive-text p {
    color: #047857;
    margin-top: 0.5rem;
    margin-bottom: 0;
  }

  .method-badge.adaptive {
    background: #d1fae5;
    color: #065f46;
  }

  .calc-step.adaptive-step {
    border-left: 4px solid #10b981;
    background: #f0fdf4;
  }

  .calc-result.adaptive-result {
    background: linear-gradient(135deg, #10b981, #059669);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .gauge-container {
      width: 250px;
    }

    .comfort-zones {
      gap: 0.75rem;
    }

    .zone-info {
      padding: 0.75rem;
    }

    .current-humidity {
      font-size: 2.5rem;
    }

    .adaptive-intro {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }
  }
</style>
